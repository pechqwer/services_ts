{"version":3,"file":"webhooksLine.js","sourceRoot":"","sources":["../../src/utils/webhooksLine.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,gEAAqC;AAUrC,MAAa,YAAY;IAMvB,YAAY,UAAyB,EAAE,MAAqB,EAAE,YAAoB;QAChF,IAAI,CAAC,UAAU,GAAG,UAAU,CAAA;QAC5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QACpB,IAAI,CAAC,YAAY,GAAG,YAAY,CAAA;QAChC,IAAI,CAAC,MAAM,GAAG;YACZ,OAAO,EAAE;gBACP,eAAe,EAAE,UAAU,IAAI,CAAC,YAAY,EAAE;gBAC9C,cAAc,EAAE,kBAAkB;aACnC;SACF,CAAA;IACH,CAAC;IAEY,MAAM,CAAC,QAAa;;YAC/B,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;YAC5B,IAAI;gBACF,IAAI,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,IAAI,CAAC;oBAAE,OAAO,IAAI,CAAA;gBAClD,MAAM,iBAAK,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,cAAwB,EAAE;oBACrD,UAAU,EAAE,IAAI,CAAC,UAAU;oBAC3B,QAAQ,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;iBAChC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;aAChB;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;gBACpB,MAAM,iBAAK,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,aAAuB,EAAE;oBACpD,EAAE,EAAE,IAAI,CAAC,MAAM;oBACf,QAAQ,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;iBAChC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;aAChB;QACH,CAAC;KAAA;IAEO,QAAQ;IAEhB,CAAC;IAEY,IAAI,CAAC,QAAa;;YAC7B,OAAO,CAAC,IAAI,CAAC,oBAAoB,EAAE,QAAQ,CAAC,CAAA;YAC5C,IAAI;gBACF,IAAI,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,IAAI,CAAC;oBAAE,OAAO,IAAI,CAAA;gBAClD,MAAM,iBAAK,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,cAAwB,EAAE;oBACrD,UAAU,EAAE,IAAI,CAAC,UAAU;oBAC3B,QAAQ,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;iBAChC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;aAChB;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;gBACpB,MAAM,iBAAK,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,aAAuB,EAAE;oBACpD,EAAE,EAAE,IAAI,CAAC,MAAM;oBACf,QAAQ,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;iBAChC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;aAChB;QACH,CAAC;KAAA;CACF;AAvDD,oCAuDC","sourcesContent":["import axios from '../config/req_api'\n\ninterface options {\n  headers: {\n    'Authorization': string,\n    'Content-Type': string\n  }\n}\n\n\nexport class webhooksLine {\n  private replyToken: string | null\n  private userId: string | null\n  private tokenChannel: string\n  private option: options\n\n  constructor(replyToken: string | null, userId: string | null, tokenChannel: string) {\n    this.replyToken = replyToken\n    this.userId = userId\n    this.tokenChannel = tokenChannel\n    this.option = {\n      headers: {\n        'Authorization': `Bearer ${this.tokenChannel}`,\n        'Content-Type': 'application/json'\n      }\n    }\n  }\n\n  public async follow(messages: any) {\n    console.info(`CASE: FOLLOW`)\n    try {\n      if (!messages || messages.length <= 0) return null\n      await axios.post(process.env.lineReplyToken as string, {\n        replyToken: this.replyToken,\n        messages: messages.slice(0, 10)\n      }, this.option)\n    } catch (error) {\n      console.debug(error)\n      await axios.post(process.env.linePushToken as string, {\n        to: this.userId,\n        messages: messages.slice(0, 10)\n      }, this.option)\n    }\n  }\n\n  private unfollow() {\n\n  }\n\n  public async send(messages: any) {\n    console.info(`CASE: SEND-MESSAGE`, messages)\n    try {\n      if (!messages || messages.length <= 0) return null\n      await axios.post(process.env.lineReplyToken as string, {\n        replyToken: this.replyToken,\n        messages: messages.slice(0, 10)\n      }, this.option)\n    } catch (error) {\n      console.debug(error)\n      await axios.post(process.env.linePushToken as string, {\n        to: this.userId,\n        messages: messages.slice(0, 10)\n      }, this.option)\n    }\n  }\n}"]}